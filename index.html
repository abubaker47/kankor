<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" type="image/png" href="img/mohe.png" />
        <meta name="viewport" charset='UTF-8' content="width=device-width, maximum-scale=1, minimum-scale=1" />
        <title>Kankor Results</title>
        <style>
            input#search-bar,input[type=image]:hover{border:1px solid #D0CFCE}body{padding-top:5%;direction:rtl}#search-container{max-width:460px;display:block;margin:2% auto 0}input#search-bar{margin:0 auto;width:75%;height:45px;padding:0 10px;font-size:1rem;outline:0}input#search-bar:focus{border:1px solid #000;transition:.35s ease;color:#000}input#search-bar:focus::-webkit-input-placeholder{transition:opacity .45s ease;opacity:0}input#search-bar:focus::-moz-placeholder{transition:opacity .45s ease;opacity:0}input#search-bar:focus:-ms-placeholder{transition:opacity .45s ease;opacity:0}a{border:none;cursor:pointer;height:45px}input[type=image]:disabled{opacity:.2;cursor:default}#search-icon{position:relative;height:40px;vertical-align:bottom;padding:2px}#result-container{width:100%;display:flex;margin:2% auto 0;text-align:center}#result-container p{width:100%}table{font-family:"Lucida Sans Unicode","Lucida Grande",Sans-Serif;font-size:16px;background:#fff;margin:0 auto;border-collapse:collapse}table th{font-size:18px;font-weight:400;color:#039;padding:10px 8px;border-bottom:2px solid #354a8d}table td{color:#669;padding:9px 8px 0}table tbody tr:hover td{color:#009}#load-bar{position:relative;margin-top:20px;width:90%;height:6px;background-color:#fdba2c;display:none}.bar{content:"";display:inline;position:absolute;width:0%;height:100%;left:50%;text-align:center}.bar:nth-child(1){background-color:#da4733;animation:loading 3s linear infinite}.bar:nth-child(2){background-color:#3b78e7;animation:loading 3s linear 1s infinite}.bar:nth-child(3){background-color:#fdba2c;animation:loading 3s linear 2s infinite}@keyframes loading{from{left:50%;width:0;z-index:100}33.3333%{left:0;width:100%;z-index:10}to{left:0;width:100%}}.alert{color:#d40404}
            .footer{ font-family:"arial, tahoma, calibri, sans-serif"; font-size: 12px; position: fixed; bottom:0px; width:99%; text-align: center; }
        </style>
    </head>
<body>
    <center>
        <img class='logo' src='img/mohe.png' alt='logo' title='MoHE'>
        <h1>وزارت تحصیلات عالی افغانستان</h1>
        <h3>ریاست عمومی امتحانات</h3>
        <h3>نتایج امتحانات کانکور سال ۱۳۹۷ عمومی.
        </h3>
        <form id="search-container" >
            <input type='text' id='search-bar' maxlength="9" placeholder='لطفاً آیدی نمبر تان را وارد نمایید.'>
            <input type='image' onclick='readId(event)' id='search-icon' src="img/search.svg" />
            <div id='load-bar'>
                <div class='bar'></div>
                <div class='bar'></div>
                <div class='bar'></div>
            </div>
        </form>
        <div id='result-container'></div>
    </center>

    <div class="footer" dir="ltr">
        <hr>
        <p>&copy; 2019 Ministry of Higher Education, Kankor Department, All Right Reserved. Powerd by <a target="_blank" href="http://elitech.af"><b>Elitech</b></a></p>
    </div>	

    <script>
        function readId(e){e.preventDefault();var t=document.getElementById("search-bar").value,n="لطفاً آیدی نمبر تان را وارد نمایید.";return t&&!0===(n=validate(t))?getResult(t):document.getElementById("result-container").innerHTML='<p class="alert">'+n+"</p>",!1}function validate(e){return 9==e.length||"لطفاً آیدی نمبر درست را وارد نمایید."}function getResult(e){var t=new XMLHttpRequest;t.open("GET","/results/"+e),t.onload=function(){if(4===t.readyState)if(document.getElementById("load-bar").style.display="none",document.getElementById("search-icon").disabled=!1,200===t.status){var e=this.responseText; console.log(JSON.parse(e)); (isJson(e) && e != 'null')?displayResult(JSON.parse(e)):document.getElementById("result-container").innerHTML='<p class="alert">آی دی نمبر اشتباه است</p>'}else console.error(t.statusText)},document.getElementById("result-container").innerHTML="",document.getElementById("search-icon").disabled=!0,document.getElementById("load-bar").style.display="block",t.send(null)}function displayResult(e){for(var t=document.createElement("table"),n=["id","name","father_name","grand_father_name","school","province","score","result"],a=["آیدی","اسم","اسم پدر","اسم پدرکلان","مکتب","ولایت","نمره کانکور","نتیجه"],d=document.createElement("tr"),r=0;r<a.length;r++){var l=document.createElement("th");l.appendChild(document.createTextNode(a[r])),d.appendChild(l)}t.appendChild(d),d=document.createElement("tr");for(r=0;r<n.length;r++){var o=document.createElement("td");o.appendChild(document.createTextNode(e[n[r]])),d.appendChild(o)}t.appendChild(d),document.getElementById("result-container").appendChild(t)}function isJson(e){try{JSON.parse(e)}catch(e){return!1}return!0}
    </script>
</body>
</html>
